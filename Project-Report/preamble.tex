% Set fonts
\usepackage{fontspec,xltxtra,xunicode}
\defaultfontfeatures{Mapping=tex-text}
\setromanfont[Scale=1,Mapping=tex-text]{Palatino}
\setsansfont[Scale=1,Mapping=tex-text]{Lucida Grande}
\setmonofont[Scale=MatchLowercase]{Menlo}

% Set Margins
\usepackage[left=4cm, right=2.5cm, top=2.5cm, bottom=2.5cm]{geometry}

% Set Line spacing
\usepackage{setspace}
\onehalfspacing
% \doublespacing

% No bold headings
\usepackage{sectsty}
\allsectionsfont{\mdseries}

% No extra space betweem words
\frenchspacing

% Control the fonts and formatting used in the table of contents.
\usepackage[titles]{tocloft}
% Increase the size of chapter entries
\renewcommand{\cftchapfont}{\normalfont\sffamily\large}
% Decrease the size of section entries
\renewcommand{\cftsecfont}{\normalfont\rmfamily\small}
% Decrease the size of subsection entries
\renewcommand{\cftsubsecfont}{\normalfont\rmfamily\small}

% Set page numbers
% NB: fancyhdr *has* to load after the geometry package!)
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyfoot[LE,RO]{\thepage}

% This set page numbers for pages at the start of chapters (Not sure exactly why this is needed!)
\fancypagestyle{plain}{%
  \fancyfoot[LE,RO]{\thepage}
}

% Force width of header rule to zero
\renewcommand{\headrulewidth}{0pt}

% Raggedright
\usepackage{ragged2e}
\RaggedRight

% Prevent over-eager hypenation
\hyphenpenalty=5000
\tolerance=1000

% Tweak block quotes: smaller text and set ragged right
\let\oldquote\quote
\renewcommand\quote{\par\RaggedRight\small\oldquote}

% Captions left justified
\usepackage[format=plain,singlelinecheck=false,justification=raggedright,font={small,it},labelfont={small,bf}]{caption}[2008/04/01]

% Pretty tables
\usepackage{mdwtab}

% Datetime
\usepackage[nodayofweek]{datetime}
% \yyyymmdddate % ISO format

% Math symbols
\usepackage[fleqn]{amsmath} % All equations left justified
\allowdisplaybreaks
\usepackage{latexsym}
\usepackage{mathrsfs}
\usepackage{xfrac}

% Code listings
\usepackage{listings}
\lstset{basicstyle=\small\ttfamily,
        showstringspaces=false}

% Libsum for testing
\usepackage[english]{babel}
\usepackage{blindtext}